<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ØµÙ…Ù‘Ù…Ù‡Ø§ Ø¨Ù†ÙØ³Ùƒ</title>
  <style>
    body {
      font-family: 'Cairo', sans-serif;
      margin: 0;
      background: #f2f2f2;
    }
    header {
      background-color: #f2f2f2;
      color: #000;
      padding: 20px 0;
      text-align: center;
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    }
    header img {
      height: 100px;
      margin-bottom: 10px;
    }
    header h1 {
      margin: 0;
      font-size: 28px;
      color: #b58e56;
    }
    header p {
      margin: 5px 0 0;
      font-size: 16px;
      color: #1f423e;
      font-weight: bold;
    }
    .progress {
      height: 6px;
      background: linear-gradient(to right, #b58e56 0%, #1f423e 100%);
      animation: progressAnim 3s infinite alternate;
    }
    @keyframes progressAnim {
      0% { width: 20%; }
      100% { width: 100%; }
    }
    form {
      background: white;
      width: 95vw;
      max-width: 1200px;
      margin: 30px auto;
      padding: 40px;
      border-radius: 16px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    }
    label {
      margin-top: 20px;
      display: block;
      font-weight: bold;
      font-size: 15px;
      color: #333;
    }
    select, input, textarea {
      width: 100%;
      padding: 12px;
      margin-top: 8px;
      border: 1px solid #ccc;
      border-radius: 10px;
      font-size: 15px;
      background-color: #fefefe;
    }
    .dimensions-grid, .extras-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin-bottom: 10px;
    }
    .dimensions-grid small, .extras-grid small {
      font-size: 12px;
      color: #888;
      display: block;
      margin-top: 5px;
    }
    .canvas-section {
      margin-top: 30px;
    }
    canvas {
      border: 2px dashed #ccc;
      display: block;
      margin: 15px auto;
      background: #fff;
      border-radius: 8px;
      max-width: 100%;
    }
    .notice {
      background: #fff8e1;
      color: #795548;
      padding: 15px;
      border-radius: 10px;
      margin-top: 20px;
      font-size: 16px;
      text-align: center;
    }
    .buttons {
      text-align: center;
      margin-top: 25px;
    }
    button {
      background-color: #b58e56;
      color: #ffffff;
      font-weight: bold;
      font-family: 'Cairo', sans-serif;
      border: none;
      border-radius: 10px;
      font-size: 16px;
      cursor: pointer;
      transition: transform 0.2s ease-in-out;
    }
    button:hover {
      background-color: #8e6e40;
      transform: scale(1.05);
    }
  </style>
</head>
<body>
  <header>
    <img src="images/logo.png" alt="Corian Castle Logo">
    <h1>ÙƒÙˆØ±ÙŠØ§Ù† ÙƒØ§Ø³ÙŠÙ„</h1>
    <p>Ø§Ù„Ø®ÙŠØ§Ù„ Ø¹Ù„ÙŠÙƒ ... ÙˆØ§Ù„ÙˆØ§Ù‚Ø¹ Ø¹Ù„ÙŠÙ†Ø§</p>
  </header>
  <div class="progress"></div>

  <form id="designForm">
    <label>Ø±Ù‚Ù… Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ Ù„Ù„ØªÙˆØ§ØµÙ„</label>
    <input type="tel" id="phone" placeholder="Ø±Ù‚Ù…Ùƒ Ø¨ÙŠØªÙ… Ø¹Ù„ÙŠÙ‡ Ø¥Ø±Ø³Ø§Ù„ ÙƒÙ„ ØªÙØ§ØµÙŠÙ„ Ø§Ù„ØªØµÙ…ÙŠÙ… Ù…Ø¨Ø§Ø´Ø±Ø©" required style="text-align: right;">

    <!-- Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ø­Ù‚ÙˆÙ„ ÙƒÙ…Ø§ Ù‡ÙŠ -->

    <label>Ù†ÙˆØ¹ Ø§Ù„Ù…Ù†ØªØ¬</label>
    <select id="productType">
      <option>Ù…ØºØ³Ù„Ø©</option>
      <option>Ù…Ø·Ø¨Ø®</option>
      <option>Ø·Ø§ÙˆÙ„Ø©</option>
      <option>ÙˆØ­Ø¯Ø© Ø®Ø§ØµØ©</option>
    </select>

    <label>Ø§Ù„Ø£Ø¨Ø¹Ø§Ø¯ (Ø¨Ø§Ù„Ù…ØªØ±)</label>
    <div class="dimensions-grid">
      <div>
        <input type="text" id="length" placeholder="Ø§Ù„Ø·ÙˆÙ„">
        <small>Ù…Ø«Ù„Ø§Ù‹ 1.2 Ù…ØªØ±</small>
      </div>
      <div>
        <input type="text" id="width" placeholder="Ø§Ù„Ø¹Ø±Ø¶">
        <small>Ù…Ø«Ù„Ø§Ù‹ 0.8 Ù…ØªØ±</small>
      </div>
      <div>
        <input type="text" id="height" placeholder="Ø§Ù„Ø§Ø±ØªÙØ§Ø¹">
        <small>Ø§ÙƒØªØ¨ 0.5 Ù„Ù„ÙØ§ØµÙ„Ø© = Ù†ØµÙ Ù…ØªØ±</small>
      </div>
    </div>

    <label>Ù…ÙƒØ§Ù† Ø§Ù„ØªØ±ÙƒÙŠØ¨</label>
    <select>
      <option>Ù…Ø·Ø¨Ø® Ø±Ø¦ÙŠØ³ÙŠ</option>
      <option>Ø­Ù…Ø§Ù… Ø¶ÙŠÙˆÙ</option>
      <option>ØºØ±ÙØ© ØºØ³ÙŠÙ„</option>
      <option>Ø£Ù…Ø§ÙƒÙ† Ø£Ø®Ø±Ù‰</option>
    </select>

    <label>Ù†ÙˆØ¹ Ø§Ù„Ø­Ù†ÙÙŠØ© / Ø§Ù„ÙØªØ­Ø©</label>
    <select>
      <option>Ø¨Ø¯ÙˆÙ† ÙØªØ­Ø©</option>
      <option>ÙØªØ­Ø© ÙˆØ§Ø­Ø¯Ø©</option>
      <option>ÙØªØ­ØªÙŠÙ†</option>
      <option>Ø­Ø³Ø¨ Ø§Ù„Ø·Ù„Ø¨</option>
    </select>

    <label>Ø´ÙƒÙ„ Ø§Ù„Ø­ÙˆØ§Ù</label>
    <select>
      <option>Ù…Ø¯ÙˆÙ‘Ø±Ø©</option>
      <option>Ø­Ø§Ø¯Ø©</option>
      <option>Ù…Ø§Ø¦Ù„Ø©</option>
      <option>Ø­Ø³Ø¨ Ø§Ù„Ø·Ù„Ø¨</option>
    </select>

    <label>Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø­ÙˆØ§Ø¶ (Ù„Ù„Ù…ØºØ³Ù„Ø© Ø£Ùˆ Ø§Ù„Ù…Ø·Ø¨Ø®)</label>
    <select>
      <option>Ø­ÙˆØ¶ ÙˆØ§Ø­Ø¯</option>
      <option>Ø­ÙˆØ¶Ø§Ù†</option>
      <option>Ù…Ø¯Ù…Ø¬</option>
    </select>

    <label>Ø§Ø®ØªØ± Ø§Ù„Ù„ÙˆÙ†</label>
    <input type="color" id="colorPicker" style="width: 100%; height: 50px; border-radius: 8px; border: 1px solid #ccc;">

    <label>Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©</label>
    <textarea id="notes" rows="3" placeholder="Ø¥Ø°Ø§ ÙˆØ¯Ù‘Ùƒ ØªÙ‚Ø³ÙŠÙ…Ø§Øª Ø®Ø§ØµØ© Ø£Ùˆ Ø¥ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª Ù…Ø¹ÙŠÙ†Ø©ØŒ Ø£Ùˆ Ø£Ø¯Ø±Ø§Ø¬.. Ø§ÙƒØªØ¨Ù‡Ù… Ù„Ù†Ø§ Ù‡Ù†ÙŠ."></textarea>

    <div class="notice">Ø§Ù„Ø­ÙŠÙ† Ø¯ÙˆØ±Ùƒ âœï¸ Ø§Ø±Ø³Ù… ÙÙƒØ±ØªÙƒ Ù…Ø«Ù„ Ù…Ø§ ØªØªØ®ÙŠÙ„Ù‡Ø§ØŒ ÙˆØ®Ù„ Ø®ÙŠØ§Ù„Ùƒ ÙŠØ´ØªØºÙ„ØŒ Ø­Ù†Ø§ Ù†Ø­ÙˆÙ„Ù‡Ø§ Ù„ÙˆØ§Ù‚Ø¹ Ù…Ø¹ ÙƒÙˆØ±ÙŠØ§Ù† ÙƒØ§Ø³ÙŠÙ„!</div>

    <div class="canvas-section">
      <canvas id="drawingCanvas" width="600" height="300"></canvas>
      <div class="buttons">
        <button type="button" onclick="clearCanvas()">Ù…Ø³Ø­ Ø§Ù„Ø±Ø³Ù…Ø©</button>
        <button type="submit">Ø£Ø±Ø³Ù„ Ø§Ù„ØªØµÙ…ÙŠÙ…</button>
      </div>
    </div>
  </form>

  <script>
    const canvas = document.getElementById('drawingCanvas');
    const ctx = canvas.getContext('2d');
    let drawing = false;
    canvas.addEventListener('mousedown', () => drawing = true);
    canvas.addEventListener('mouseup', () => { drawing = false; ctx.beginPath(); });
    canvas.addEventListener('mouseout', () => drawing = false);
    canvas.addEventListener('mousemove', draw);

    function draw(e) {
      if (!drawing) return;
      const rect = canvas.getBoundingClientRect();
      ctx.lineWidth = 2;
      ctx.lineCap = 'round';
      ctx.strokeStyle = document.getElementById('colorPicker').value;
      ctx.lineTo(e.clientX - rect.left, e.clientY - rect.top);
      ctx.stroke();
      ctx.beginPath();
      ctx.moveTo(e.clientX - rect.left, e.clientY - rect.top);
    }

    function clearCanvas() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
    }

    document.getElementById("designForm").addEventListener("submit", function(e) {
  e.preventDefault();

  const phone = document.getElementById("phone").value;
  const productType = document.getElementById("productType").value;
  const length = document.getElementById("length").value;
  const width = document.getElementById("width").value;
  const height = document.getElementById("height").value;
  const color = document.getElementById("colorPicker").value;
  const notes = document.getElementById("notes").value;

  const query = new URLSearchParams({
    phone,
    productType,
    length,
    width,
    height,
    color,
    notes
  }).toString();

  // ğŸ‘‡ Ù‡Ù†Ø§ Ù†Ø¨Ø¯Ø£ Ù†Ø³ØªØ®Ø¯Ù… fetch Ø¹Ø´Ø§Ù† Ù†Ø±Ø³Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„Ø³ÙŠØ±ÙØ±
fetch("https://corian-designer-backend.onrender.com/submit-design", {
  method: "POST",
  headers: {
    "Content-Type": "application/json"
  },
  body: JSON.stringify({
    phone,
    productType,
    dimensions: `${length}x${width}x${height}`,
    color,
    notes,
    image: canvas.toDataURL(),
    prompt: `ØªØµÙ…ÙŠÙ… ${productType} Ø¨Ø§Ù„Ø£Ø¨Ø¹Ø§Ø¯ ${length}Ã—${width}Ã—${height} Ø¨Ø§Ù„Ù„ÙˆÙ† ${color}`
  })
})
.then(res => res.json())
.then(data => {
  // âœ… Ø¨Ø¹Ø¯ Ù…Ø§ Ø§Ù„Ø³ÙŠØ±ÙØ± ÙŠØ±Ø¯ Ø¨Ù†Ø¬Ø§Ø­ØŒ Ù†Ø±ÙˆØ­ Ù„ØµÙØ­Ø© Ø§Ù„ØªØ£ÙƒÙŠØ¯ Ù…Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
  const imageUrl = encodeURIComponent(data.aiImageUrl || "");
  window.location.href = `confirm-design.html?phone=${phone}&productType=${productType}&length=${length}&width=${width}&height=${height}&color=${color}&notes=${encodeURIComponent(notes)}&imageUrl=${imageUrl}`;
})
.catch(error => {
  alert("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªØµÙ…ÙŠÙ…ØŒ Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.");
  console.error(error);
});

});

  </script>
</body>
</html>
